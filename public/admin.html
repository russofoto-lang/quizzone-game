// Aggiungi questo handler per aggiornare manualmente i punti delle risposte
socket.on('update_answer_points', (data) => {
    const answer = gameState.roundAnswers[data.answerIndex];
    if (answer) {
        const oldPoints = answer.punti || 0;
        const newPoints = data.newPoints;
        answer.punti = newPoints;

        // Aggiorna il punteggio della squadra
        if (gameState.teams[answer.teamId]) {
            // Calcola la differenza e aggiorna
            const diff = newPoints - oldPoints;
            gameState.teams[answer.teamId].score += diff;
            io.emit('update_teams', Object.values(gameState.teams));
        }

        // Aggiorna il monitor admin
        io.to('admin').emit('update_round_monitor', gameState.roundAnswers);
    }
});

// Aggiungi questo handler per mostrare la soluzione sul display
socket.on('mostra_soluzione', (data) => {
    // Inoltra a tutti i display/client per mostrare la soluzione
    io.emit('mostra_soluzione', { 
        soluzione: data.soluzione, 
        risultati: gameState.roundAnswers 
    });
});
